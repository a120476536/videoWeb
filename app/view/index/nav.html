<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{$systemName|default='å½±è§†ç«™'}</title>
    <link rel="stylesheet" href="../../../public/css/nav.css">
    <style>
        * {margin:0; padding:0; box-sizing:border-box;}
        body {font-family: 'Microsoft YaHei', Arial; background: #f4f4f4;}

        /* é¡¶éƒ¨å¹¿å‘Š */
        #ad-top {position: relative; top: 0; background: rgba(255,255,255,0.95); text-align: center; z-index: 9999;}
        /* åº•éƒ¨æ‚¬æµ®å¹¿å‘Š */
        #ad-bottom {position: fixed; bottom:0; left:0; width:100%; text-align:center; z-index:9999; background: rgba(255,255,255,0.95);}
        /* å·¦å³æ‚¬æµ®å¹¿å‘Š */
        #ad-left, #ad-right {position: fixed; top:220px; width:100px; z-index:9999;}
        #ad-left {left:0;}
        #ad-right {right:0;}
        /* è§†é¢‘åº•éƒ¨å¹¿å‘Š */
        #ad-video-bottom {text-align:center; margin:20px 0;}

        /* Header */
        .header {position: sticky; top:5px; z-index:1000; background:#fff; padding:15px 0; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
        .header-container {max-width:1200px; margin:0 auto; display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:20px; padding:0 20px;}
        .logo {font-size:28px; font-weight:bold; color:#667eea; text-decoration:none;}
        .nav-dropdown {display:flex; gap:15px; justify-content:center; flex:1; overflow:hidden;}
        .nav-item, .nav-dropdown-item {padding:8px 16px; border-radius:20px; text-decoration:none; font-size:14px; color:#333; transition:0.3s; white-space:nowrap;}
        .nav-item.active, .nav-dropdown-item.active {background: linear-gradient(135deg,#667eea,#764ba2); color:#fff;}
        .search-box {position:relative; flex-shrink:0;}
        .search-input {width:250px; padding:10px 40px 10px 15px; border:2px solid #ccc; border-radius:25px; outline:none; transition:0.3s;}
        .search-input:focus {border-color:#667eea; box-shadow:0 0 8px rgba(102,126,234,0.3);}
        .search-btn {position:absolute; right:5px; top:50%; transform:translateY(-50%); width:32px; height:32px; border:none; border-radius:50%; background: linear-gradient(135deg,#667eea,#764ba2); color:#fff; cursor:pointer;}

        /* è§†é¢‘åˆ—è¡¨ */
        .video_content_card {display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; max-width:1400px; margin:10px auto 40px; padding-left:120px; padding-right:120px;}
        .video-card {background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.1); display:flex; flex-direction:column; transition:0.3s;}
        .video-card:hover {transform:translateY(-5px); box-shadow:0 8px 20px rgba(0,0,0,0.15);}
        .card-image {width:100%; height:200px; object-fit:cover;}
        .card-content {padding:15px; flex-grow:1; display:flex; flex-direction:column;}
        .card-title {font-size:18px; font-weight:600; margin-bottom:10px; color:#333;}
        .card-subtitle {font-size:14px; color:#666; margin-bottom:10px;}
        .card-info {display:flex; justify-content:space-between; font-size:12px; color:#888; margin-top:auto;}
        .card-tag {display:inline-block; background:#f0f0f0; color:#666; padding:3px 8px; border-radius:4px; margin-right:5px; margin-bottom:5px; font-size:12px;}
        .card-footer {display:flex; justify-content:space-between; align-items:center; margin-top:10px; padding-top:10px; border-top:1px solid #f0f0f0;}
        .update-info {font-size:12px; color:#ff6b6b; font-weight:500;}
        .play-btn {background:#ff6b6b; color:#fff; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; transition:0.3s;}
        .play-btn:hover {background:#ff5252;}
        .no-data {text-align:center; padding:40px; color:#999; grid-column:1/-1;}

        @media(max-width:1024px){.video_content_card {padding-left:20px; padding-right:20px;} #ad-left,#ad-right{display:none;}}
        @media(max-width:768px){.video_content_card{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));}}
        @media(max-width:480px){.video_content_card{grid-template-columns:1fr;}}
    </style>
</head>
<body>

   
    <!-- Header -->
<header class="header">
    <div class="header-container">
        <a href="{$systemLogo|default='/'}" class="logo">{$systemName|default='å½±è§†ç«™'}</a>
        <nav class="nav-dropdown">
            <div class="nav-main-items">
                <a href="/index/index" class="nav-item {$navItem.active?'active':''}">é¦–é¡µ</a>
                {foreach $navItemShow as $navItem}
                    <a href="/index/nav?tid={$navItem.type_id}" class="nav-item {$navItem.active?'active':''}">{$navItem.type_name}</a>
                {/foreach}
            </div>
        </nav>
        <div class="search-box">
            <form method="GET" action="/search">
                <input type="text" name="keyword" class="search-input" placeholder="æœç´¢ç”µå½±ã€ç”µè§†å‰§..." value="{$currentKeyword|default=''}">
                <button type="submit" class="search-btn">ğŸ”</button>
            </form>
        </div>
    </div>
</header>

<!-- é¡¶éƒ¨å¹¿å‘Šï¼ˆå¯¼èˆªä¸‹æ–¹ï¼‰ -->
<div id="ad-top"></div>

    

    <!-- å·¦å³æ‚¬æµ®å¹¿å‘Š -->
    <div id="ad-left"></div>
    <div id="ad-right"></div>

    <!-- è§†é¢‘åˆ—è¡¨ -->
    <div class="video_content_card">
        {if isset($videoData.list) && !empty($videoData.list)}
            {foreach $videoData.list as $video}
            <div class="video-card">
                <img src="{$video.vod_pic}" class="card-image">
                <div class="card-content">
                    <h3 class="card-title">{$video.vod_name}</h3>
                    <div class="card-info">
                        <span>ä¸»æ¼”: {if !empty($video.vod_actor)}{$video.vod_actor}{else}æœªçŸ¥{/if}</span>
                    </div>
                    <div class="card-footer">
                        <span class="update-info">{$video.vod_remarks}</span>
                        <button class="play-btn" onclick="playVideo('{$video.vod_name}')">æ’­æ”¾</button>
                    </div>
                </div>
            </div>
            {/foreach}
        {else}
            <div class="no-data"><p>æš‚æ— è§†é¢‘æ•°æ®</p></div>
        {/if}
    </div>

    <!-- è§†é¢‘åº•éƒ¨å¹¿å‘Š -->
    <div id="ad-video-bottom"></div>

    <!-- åº•éƒ¨æ‚¬æµ®å¹¿å‘Š -->
    <div id="ad-bottom"></div>

<script>
function playVideo(vod_name){
    window.location.href = '/index/search?keyword='+encodeURIComponent(vod_name);
}

// åŠ¨æ€åŠ è½½å¹¿å‘Šå‡½æ•°
function insertAd(containerId, content){
    const container = document.getElementById(containerId);
    if(!container || !content) return;
    content = content.trim();

    // script æ ‡ç­¾å¤„ç†
    if(content.startsWith('<script')){
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = content;
        const scriptTag = tempDiv.querySelector('script');
        if(scriptTag){
            const newScript = document.createElement('script');
            // å¤åˆ¶å±æ€§
            for(let attr of scriptTag.attributes){
                newScript.setAttribute(attr.name, attr.value);
            }
            // å¤åˆ¶å†…è”å†…å®¹
            if(scriptTag.innerHTML){
                newScript.text = scriptTag.innerHTML;
            }
            container.appendChild(newScript);
        }
    } else {
        container.innerHTML = content;
    }
}

// é¡µé¢åŠ è½½å®Œåæ‹‰å– ads.json
document.addEventListener('DOMContentLoaded', function(){
    fetch('/ads.json')
        .then(res=>res.json())
        .then(ads=>{
            insertAd('ad-top', ads.top);
            insertAd('ad-bottom', ads.bottom);
            insertAd('ad-left', ads.left);
            insertAd('ad-right', ads.right);
            insertAd('ad-video-bottom', ads.video_bottom);
        })
        .catch(err=>console.error('å¹¿å‘ŠåŠ è½½å¤±è´¥', err));
});
</script>

</body>
</html>
